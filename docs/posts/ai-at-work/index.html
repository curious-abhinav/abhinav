<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Abhinav Singh">
<meta name="dcterms.date" content="2025-05-06">
<meta name="description" content="Delegating tasks to agents is a transitional state, we will redesign decision networks around the capabilities of humans and AI">

<title>AI’s three stage revolution: Insights from the electrical revolution in manufacturing – Abhinav Singh</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Abhinav Singh</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Posts</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">AI’s three stage revolution: Insights from the electrical revolution in manufacturing</h1>
                  <div>
        <div class="description">
          Delegating tasks to agents is a transitional state, we will redesign decision networks around the capabilities of humans and AI
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">AI</div>
                <div class="quarto-category">work</div>
                <div class="quarto-category">electricity</div>
                <div class="quarto-category">networks</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Abhinav Singh </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 6, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#ai-revolution-in-historical-context" id="toc-ai-revolution-in-historical-context" class="nav-link active" data-scroll-target="#ai-revolution-in-historical-context">AI revolution in historical context</a></li>
  <li><a href="#part-1-patterns-of-technological-revolutions" id="toc-part-1-patterns-of-technological-revolutions" class="nav-link" data-scroll-target="#part-1-patterns-of-technological-revolutions">Part 1: Patterns of technological revolutions</a>
  <ul>
  <li><a href="#how-electricity-transformed-factories" id="toc-how-electricity-transformed-factories" class="nav-link" data-scroll-target="#how-electricity-transformed-factories">How electricity transformed factories</a></li>
  <li><a href="#the-three-stages-of-technological-revolutions" id="toc-the-three-stages-of-technological-revolutions" class="nav-link" data-scroll-target="#the-three-stages-of-technological-revolutions">The three stages of technological revolutions</a></li>
  </ul></li>
  <li><a href="#part-2.-rewiring-decision-networks-applying-the-electricity-model-to-ai-diffusion" id="toc-part-2.-rewiring-decision-networks-applying-the-electricity-model-to-ai-diffusion" class="nav-link" data-scroll-target="#part-2.-rewiring-decision-networks-applying-the-electricity-model-to-ai-diffusion">Part 2. Rewiring decision networks: Applying the electricity model to AI diffusion</a>
  <ul>
  <li><a href="#ai-at-work-the-missing-ingredients" id="toc-ai-at-work-the-missing-ingredients" class="nav-link" data-scroll-target="#ai-at-work-the-missing-ingredients">AI at work: the missing ingredients</a></li>
  <li><a href="#the-coming-transformation-reinventing-decision-networks" id="toc-the-coming-transformation-reinventing-decision-networks" class="nav-link" data-scroll-target="#the-coming-transformation-reinventing-decision-networks">The coming transformation: reinventing decision networks</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="ai-revolution-in-historical-context" class="level3">
<h3 class="anchored" data-anchor-id="ai-revolution-in-historical-context">AI revolution in historical context</h3>
<p>With daily announcements of new AI models achieving what seemed impossible a year ago, it’s easy to swing between two extremes: thinking it’s a fad or believing AI will instantly revolutionise everything. However, history shows that tech revolutions happen in stages. Their economic impact often <a href="https://www.bbc.co.uk/news/business-40673694">lags behind inventions by decades</a>. Right now, we’re missing many key elements, both technical and operational. AI’s transformative impact will unfold gradually, just like electricity’s did, and we’re still in the early stages. To realise its promise as the next economic engine, AI requires us to rethink our system of work. This reinvention will need many new products, inventions, and operational innovations beyond just developing AI models. I say this because we’ve been here before.</p>
<p>Faraday invented the dynamo in 1831. Electric power stations became commercially available in 1882. However, electricity did not significantly impact productivity for decades. In 1909, electricity made up only 25% of energy use in factories. It was not until the 1920s that electricity became the main power source in factories. Why did it take 40 years for electricity to make an impact on economic productivity and what can we learn from this today? You might have read that AI is the new electricity, let’s take this idea seriously.</p>
<p>We’ll first develop a three stage model of technological revolutions by examining the history of the second industrial revolution, specifically the transformation of factories by electricity, using a systems thinking approach. Next, I’ll use this model to argue that AI is currently at a similar stage to where electricity was when factories had just installed electric motors - we have achieved increased efficiency, but the real breakthroughs will come when we redesign the decision networks that drive our organisations. Finally, I’ll share my thoughts on what an AI native organisation might look like.</p>
</section>
<section id="part-1-patterns-of-technological-revolutions" class="level3">
<h3 class="anchored" data-anchor-id="part-1-patterns-of-technological-revolutions">Part 1: Patterns of technological revolutions</h3>
<section id="how-electricity-transformed-factories" class="level4">
<h4 class="anchored" data-anchor-id="how-electricity-transformed-factories">How electricity transformed factories</h4>
<p>Understanding how factories worked before electricity will help us fully appreciate how <a href="https://www.osti.gov/servlets/purl/6774921">electricity transformed factories</a> and why transformation is challenging despite the obvious advantages of new technology. The pre-electricity factory had many drawbacks that limited its productivity. The factory had three main parts: - a prime mover, often a steam engine that provided the energy - a system of shafts and belts to transfer the energy within the factory - machines attached to belts that performed the work.</p>
<p>The pace of every task and operation of all machines was determined by the shaft connected to the prime mover. Any failure in the shaft meant that the entire factory stopped functioning. Each machine ran to a fixed cadence set by the prime mover irrespective of the nature of the individual task. These drawbacks disappeared in the post electricity factory but this happened in stages.</p>
<p>Replacing the steam engine with an electrical motor as the prime mover was the natural first step, as electricity was cheaper than steam power and electrical motors were an obvious slot in replacement for steam engines. Cost reduction was the driving motive for this step, but there was no change in the production system itself. Factories considered electrical motors only as a source of energy production at this stage and since the cost of energy was a small fraction of the total cost of production, this change only had a marginal impact on productivity.</p>
<p>In the next stage, innovative firms realised that electrical motors could be used to control the distribution of energy in addition to generating the energy. This insight changed the narrative from cost reduction to gain in productivity. Factories replaced the single line shaft with the group drive system which consisted of multiple motors, each motor connected to a group of machines by smaller shafts and belts. This system had two advantages: each group operated independently at their own speed, schedule and there was no longer a single point of failure which increased productivity. Freed from the constraints of the line shaft, factories were able to create more efficient layouts. It became possible to organise factories into specialised shops and departments by groups of related machines that could be switched off when not in use further reducing costs. However, the core of the production system remained rooted in the constraints set by the system of belts and pulleys, not in the flexibilities offered by electrical motors.</p>
<p>Finally, engineers and managers took full advantage of the new capabilities of electricity to redesign factories from ground up. Since electricity made it possible to supply energy at any location with wires, the belts and pulleys disappeared, each machine was connected to an individual motor, the unit drive and electricity was supplied via wires to machine tools. Figure from Devine’s <a href="(https://www.osti.gov/servlets/purl/6774921)">classic paper</a> shows the evolution of the factory from shafts and belts to the unit drive through the intermediate stages.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="factory_transformation.png" class="img-fluid figure-img"></p>
<figcaption>Factory transformation showing evolution from shafts and belts to unit drive</figcaption>
</figure>
</div>
<p>Factory layout could now be redesigned according to the flow of materials rather than the constraints of line shafts and belts. With the unit drive, it became possible to precisely control machines with electrical throttlers and governors. Entirely new specialised machine tools like portable power tools and manufacturing techniques like electroplating were invented which were impossible before electricity. Factories were no longer dark, unsafe places as they had been due to the large overhead shafts, but could be lighter and airier. Factories were limited in size before electricity because of the cumbersomeness of shafts, but there were almost no limits to scale after electricity. Cumulatively, this led to a total transformation of factories and a step change in factory throughput.</p>
<p>In short, the factory before electricity was built around the constraints of distributing mechanical energy, electricity loosened these constraints, made it possible to control the amount of energy available to any desired location which was impossible with mechanical energy. This new capability led to a transformation of the factory, step change in throughput and led the second industrial revolution.</p>
</section>
<section id="the-three-stages-of-technological-revolutions" class="level4">
<h4 class="anchored" data-anchor-id="the-three-stages-of-technological-revolutions">The three stages of technological revolutions</h4>
<p>If we zoom out, we see the general pattern in how the <a href="https://warwick.ac.uk/fac/soc/economics/research/workingpapers/1989-1994/twerp339.pdf">systems of work are transformed in a technological revolution</a>. The systems of work in any age are built around the constraints of the existing technology. The new technology loosens these constraints but the existing system of work persists until engineers and managers figure out ways to convert the potential of the new technology into superior commercial performance. Ultimately, the system is replaced by a new system that takes advantage of the new capabilities and flexibilities offered by the new technology. This replacement happens in three stages.</p>
<p>Stage one: Speedup of tasks with plug and play approaches. New technology is viewed as an efficiency provider for existing tasks with plug and play approaches. Firms view the new technology as an operational expense and see incremental gains.</p>
<p>Stage two: Subsystem redesign. Innovative firms begin to take advantage of the new possibilities offered by the technology by modifying the systems of work around the edges while retaining the core workflows. There are vigorous debates about the relative advantages of the old and new ways of working. The median firm continues to consider the new technology as an operational expense trying to make the best of existing capital investment and minimise disruption of existing workflows.</p>
<p>Stage three: Structure redesign from ground up: New technology brings workflows and tools that fully utilise its flexibilities and capabilities, replacing the old system. The electrical transformation of the factory needed both technological development and operational innovation. This included new technological items like motors, specialised machine tools, and updated factory layouts. Innovative companies invest in replacing old technology, while new firms adopt the latest technology right from the start. The rest of the companies only switch when faced with competitive pressure.</p>
<p>Progression through these stages is not automatic. It involves a struggle between the new technology’s expanded possibilities, financial and production capital, organisational dynamics, and the limits placed by society and government. Together, these factors create a path-dependent progression across different industries and regions.</p>
<p>If you know about systems thinking and <a href="https://donellameadows.org/wp-content/userfiles/Leverage_Points.pdf">leverage points</a>, you’ll see that the first stage is the lowest leverage point. It changes constants and needs the least disruption. The second and third stages involve changes in structure and self-reorganisation, which have higher leverage. If you’re new to systems thinking, I recommend Donella Meadows’ <a href="https://www.amazon.co.uk/Thinking-Systems-Primer-Donella-Meadows/dp/1603580557">Thinking in Systems: A Primer</a> and the <a href="https://www.amazon.co.uk/Unaccountability-Machine-Systems-Terrible-Decisions/dp/1788169557/">Unaccountability Machine</a> by Dan Davies. They explore important ideas about organisational decision-making.</p>
</section>
</section>
<section id="part-2.-rewiring-decision-networks-applying-the-electricity-model-to-ai-diffusion" class="level3">
<h3 class="anchored" data-anchor-id="part-2.-rewiring-decision-networks-applying-the-electricity-model-to-ai-diffusion">Part 2. Rewiring decision networks: Applying the electricity model to AI diffusion</h3>
<section id="ai-at-work-the-missing-ingredients" class="level4">
<h4 class="anchored" data-anchor-id="ai-at-work-the-missing-ingredients">AI at work: the missing ingredients</h4>
<p>If we look at the present, we see we are still in the age of ‘shafts and belts’ regarding AI’s impact on work systems. Most uses of AI are in the early stage of change. Here, we replace old technology with faster new tools while keeping the workflow the same. Companies using generalist LLMs to create copy quickly show this trend. This is like when factories changed from steam engines to electric motors. They did this without changing how work was done. In this first stage, AI boosts individual productivity, but it won’t lead to a big change in overall productivity unless we redesign workflows.</p>
<p>AI and humans have different strengths and weaknesses. This difference opens new ways to organise work. We are moving into stage two of the AI revolution, where we delegate specific tasks to AI. AI can keep more context, communicate widely, and process information faster. In contrast, humans excel in judgement. Judgement means adjusting decisions based on new information. This ability goes beyond simple rules and formal policies.</p>
<p>By recognising our strengths and weaknesses, we can use AI as agents for certain tasks. These tasks don’t need high judgement but do need processing large amounts of information. I refer to agents in Alan Kay’s sense, as entities that “clone their users’ goals and then carry them out.” His <a href="https://worrydream.com/refs/Kay_1989_-_User_Interface,_a_Personal_View.pdf">paper</a> discusses the use cases, like guidance and coaching, and the challenges, such as trust, of building effective agents from a user interface perspective back in 1989. Some functions, like customer service and software development, are beginning to redesign subsystems. They are experimenting with new workflows by delegating tasks to AI with human supervision. However, it’s still early days, and we haven’t yet changed our core organisational systems of work.</p>
<p>Drawing parallels with the electrical revolution, we still need the equivalents of unit drives, portable power tools, and redesigned factory layouts. I will share my thoughts on the structure and behaviour of AI-native organisations in the next few paragraphs. The topic of AI-native products will wait for another time, I recommend keeping an eye on <a href="https://computer.tldraw.com/">tldraw</a>, <a href="http://answer.ai">answer.ai</a>, and the <a href="https://hci.ucsd.edu/">Foundation Interface Lab</a>.</p>
</section>
<section id="the-coming-transformation-reinventing-decision-networks" class="level4">
<h4 class="anchored" data-anchor-id="the-coming-transformation-reinventing-decision-networks">The coming transformation: reinventing decision networks</h4>
<p>Before I discuss what an AI-native organisation might look like, let’s review our current work systems by taking a brief look at history. When computers first appeared, scientists began to envision intelligent organisations. Starting in the 1950s, thinkers like <a href="https://archive.org/details/managementcomput00gree/page/36/mode/2up">Jay Forrester</a> modelled organisations as complex networks of information channels with feedback loops. Managers at key points made decisions to turn information into action, while computers processed data to enhance decision-making speed and quality. The figures below illustrate Forrester’s networks and the process of managerial decision-making, which come across quite modern. I refer to this network of information channels and decision-makers as a decision network.</p>
<p>Although the pioneers lacked the benefits of Moore’s law, machine learning, or AI that can communicate naturally, this framework remains powerful for analysing AI’s transformative potential. What decisions are taken, how are they taken, when are they taken and by whom? The structure of the decision network informs each one of these questions and AI will change the status quo for all of them.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="decision_process.png" class="img-fluid figure-img"></p>
<figcaption>Decision process</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="decision_network.png" class="img-fluid figure-img"></p>
<figcaption>Forrester’s decision network</figcaption>
</figure>
</div>
<p>AI will transform our current decision networks because it relaxes the constraints of individual and group decision making. Our current decision networks are the answer to the complexity of making interlinked decisions in volatile environments by large groups of people with limited information. We manage this complexity by various mechanisms like departmental boundaries and hierarchies, standard operating procedures, and an assortment of collaborative apps and processes. However, we are constrained by the information processing capacity of individual humans and the high coordination costs of group decision making.</p>
<p>Until now, it has been hard to teach AI tacit knowledge and institutional decision policies but with the recent AI models, that can efficiently process natural language, we can now embed our ways of working into AI models. Combined with their inherent strengths in speedily processing vast amounts of data and high communication bandwidth in natural and programming languages, AI models can lower the coordination costs of group decision making.</p>
<p>Our current networks of humans working together will eventually shift to a new system. This new system will involve humans and agents interacting with each other, focusing on optimal information flow instead of today’s functional hierarchies. This approach will respond better to changes in the environment and lead to faster, more effective decisions for organisations.</p>
<p>Decisions, especially collaborative decisions will be made and remade much faster than today where AI will be allowed to exert agency, and nontrivial fraction of work done by humans will involve managing AI agents. As a simplified example, consider the problem of product discovery, helping customers find the product that matches their needs. In most organisations, this problem is commonly distributed between multiple functions like advertising, visual merchandising, sales and marketing. A stage two organisation will delegate some of their advertising, or promotion campaign decisions to agents under human supervision and may account for the interdependency between advertising user journeys and promotion campaigns. A stage three company will ask entirely new questions.</p>
<p>The question will change from how to spend your advertising or promotions budget to how to divide your product discovery budget among advertising, promotions, and marketing. Instead of asking AI for the best discounts on certain SKUs, we will ask what overall goal you should set for your agents. The network of agents will adjust advertising campaigns, personalised promotions, and product recommendations to meet that goal. In short, stage three organisations will make decisions that were once impossible.</p>
<p>The stage three future of AI-native organisations won’t arrive right away. <a href="https://arxiv.org/abs/2503.13657">We’re not there yet</a>, we need more inventions. However, waiting isn’t a good choice for any organisation in a competitive market. History shows that, like electricity, lasting competitive advantage will go to those who go beyond the first stage. They will reimagine their organisations around AI’s unique strengths.</p>
<p>Start by identifying repetitive, low judgement tasks and delegating them to AI agents under human supervision. Prepare for stage 3 by mapping out cross department decisions, uncovering the rate limiting steps, and asking what you would do differently if collaboration required just one tenth of the current effort and time. Begin cross departmental pilot projects that test AI driven decision making in a controlled way to learn what new structures might be required. The precise shape of AI native organisations can only be iteratively discovered, but we can be sure that when available net agency grows dramatically and cost effective intelligence supported by all relevant data can be brought to bear upon any information task, no matter how trivial or vital, we will work differently and do different work.</p>
<p><span style="color:grey;"> Thanks to Malavika and Simon for discussing early versions of this post. </span></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Abhinav Singh, 2025–. <a href="disclaimer">Disclaimer</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>